import{i as L}from"./BXplmpc7.js";import{w as Ue,aK as Xe,b8 as Ye,aG as Ze,J as et,z as _e,a1 as tt,O as st,aw as Z,aH as rt,a4 as Ae,b as y,L as $,i as f,g as a,l as h,j as N,u as m,p as ye,f as V,d as b,r as d,s as C,t as q,e as S,c as Pe,k as Re,N as be,M as it,a as lt}from"./5VZ75QxE.js";import{e as qe,i as je,$ as ke}from"./Ct1j_H41.js";import{c as oe,i as at,f as nt,a as pe,r as ct,d as ot,g as ht}from"./JV7kH0Yl.js";import{r as he,p as x,a as xe,s as Se}from"./S-m5C_xP.js";const ut=[];function ft(s,e=!1,t=!1){return ae(s,new Map,"",ut,null,t)}function ae(s,e,t,r,l=null,i=!1){if(typeof s=="object"&&s!==null){var n=e.get(s);if(n!==void 0)return n;if(s instanceof Map)return new Map(s);if(s instanceof Set)return new Set(s);if(Ue(s)){var c=Array(s.length);e.set(s,c),l!==null&&e.set(l,c);for(var o=0;o<s.length;o+=1){var u=s[o];o in s&&(c[o]=ae(u,e,t,r,null,i))}return c}if(Xe(s)===Ye){c={},e.set(s,c),l!==null&&e.set(l,c);for(var p in s)c[p]=ae(s[p],e,t,r,null,i);return c}if(s instanceof Date)return structuredClone(s);if(typeof s.toJSON=="function"&&!i)return ae(s.toJSON(),e,t,r,s)}if(s instanceof EventTarget)return s;try{return structuredClone(s)}catch{return s}}function dt(s,e,t=e){var r=new WeakSet;Ze(s,"input",async l=>{var i=l?s.defaultValue:s.value;if(i=ve(s)?we(i):i,t(i),Z!==null&&r.add(Z),await et(),i!==(i=e())){var n=s.selectionStart,c=s.selectionEnd,o=s.value.length;if(s.value=i??"",c!==null){var u=s.value.length;n===c&&c===o&&u>o?(s.selectionStart=u,s.selectionEnd=u):(s.selectionStart=n,s.selectionEnd=Math.min(c,u))}}}),(st&&s.defaultValue!==s.value||_e(e)==null&&s.value)&&(t(ve(s)?we(s.value):s.value),Z!==null&&r.add(Z)),tt(()=>{var l=e();if(s===document.activeElement){var i=rt??Z;if(r.has(i))return}ve(s)&&l===we(s.value)||s.type==="date"&&!l&&!s.value||l!==s.value&&(s.value=l??"")})}function ve(s){var e=s.type;return e==="number"||e==="range"}function we(s){return s===""?null:+s}var gt=Ae('<svg><path fill="currentColor" d="m16 10l10 10l-1.4 1.4l-8.6-8.6l-8.6 8.6L6 20z"></path></svg>');function bt(s,e){const t=he(e,["$$slots","$$events","$$legacy"]);var r=gt();oe(r,()=>({viewBox:"0 0 32 32",width:"1.2em",height:"1.2em",...t})),y(s,r)}var pt=Ae('<svg><path fill="currentColor" d="M16 22L6 12l1.4-1.4l8.6 8.6l8.6-8.6L26 12z"></path></svg>');function vt(s,e){const t=he(e,["$$slots","$$events","$$legacy"]);var r=pt();oe(r,()=>({viewBox:"0 0 32 32",width:"1.2em",height:"1.2em",...t})),y(s,r)}$(["click"]);$(["click"]);$(["input"]);$(["click"]);$(["input"]);$(["change"]);class wt{listeners={change:[],clearFilters:[],clearSearch:[]};queue=new Set;add(e,t){this.listeners[e].push(t)}async dispatch(e){this.queue.add(e),await new Promise(t=>setTimeout(t,40)),this.queue.size>0&&this.run(),this.queue.clear()}run(){for(const e of this.queue)for(const t of this.listeners[e])t()}}const W=s=>s==null||s==="",Be=s=>!W(s),ee=(s=null)=>String(s).toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),mt=s=>typeof s!="object"?!1:s!==null,J={isLike:(s,e)=>ee(s).includes(ee(e)),isEqualTo:(s,e)=>ee(s)===ee(e),whereIn:(s,e=[])=>{if(e.length===0)return!1;for(const{value:t,check:r}of e){if(t?.key)return _t(s,t,r);if(r(s,t))return!0}return!1},match:(s,e)=>{const t=e.match(/^([\/~@;%#'])(.*?)\1([gimsuy]*)$/),r=t?new RegExp(t[2],t[3].split("").filter((l,i,n)=>n.indexOf(l)===i).join("")):new RegExp(e);return!!ee(s).match(r)}},_t=(s,e,t)=>{if(!e?.key)return!1;const{key:r,value:l}=e;return!!(Array.isArray(s)===!1&&typeof s=="object"&&Object.keys(s).includes(r)&&t(s[r],l))},D=(s,e,t)=>(t.check=t.check??J.isLike,W(e)?!0:mt(s)?Object.keys(s).some(r=>D(s[r],e,t)):t.check(s,e)),me=(s,e,t)=>(Array.isArray(s)&&(s=s.filter(r=>{const l=t.isRecursive===!0?D(r,e,t):!0;if(typeof r=="object"&&l===!0)for(const i of Object.keys(r))r[i]=me(r[i],e,t);return l})),t.highlight&&(typeof s=="string"||typeof s=="number")&&typeof e=="string"&&D(s,e,t)?Ee(s,e):s),Ee=(s,e)=>{const t=e.replace(/a/g,"[aàâáä]").replace(/e/g,"[eèêéë]").replace(/i/g,"[iìîíï]").replace(/o/g,"[oòôо́ö]").replace(/u/g,"[uùûúü]").replace(/y/g,"[yỳŷýÿ]"),r=new RegExp(`${t}`,"gi");return String(s).replace(r,'<u class="highlight">$&</u>')},Ce=(s,e,t)=>{const r=t.toString().split("=>")[1].replace(/\(\)/g,"").replace(/\?/g,"").split(".").splice(1).join(".").trim();return r.indexOf(" ")>-1?s:yt(s,r,e)},yt=(s,e,t)=>{const r=s,l=e.replace(/\[/g,".[").split(".");try{for(let i=0;i<l.length;i++){let n=l[i],c=l[i+1];n.includes("[")&&(n=String(parseInt(n.substring(1,n.length-1)))),c&&c.includes("[")&&(c=String(parseInt(c.substring(1,c.length-1)))),c!==void 0?s[n]=s[n]?s[n]:isNaN(Number(c))?{}:[]:s[n]=Ee(s[n],t),s=s[n]}return r}catch{return r}},O=(s,e)=>{if(typeof s=="string")return{callback:t=>t[s],id:e,key:s};if(typeof s=="function")return{callback:s,id:e,key:void 0};throw new Error(`Invalid field argument: ${String(s)}`)},ne={search:(s,{scope:e,isRecursive:t,value:r,check:l},i=!1)=>s.filter(n=>{const o=(e??Object.keys(n)).map(u=>O(u));for(const{key:u,callback:p}of o)u?n[u]=me(n[u],r,{highlight:i,isRecursive:t===!0}):i&&(n=Ce(n,r,p));return o.some(({callback:u})=>D(u(n),r,{check:l}))}),filter:(s,{callback:e,value:t,check:r,key:l},i=!1)=>s.filter(n=>{const c=D(e(n),t,{check:r});return l?n[l]=me(n[l],t,{highlight:i,check:r,isRecursive:!0}):i&&c&&t&&typeof t=="string"&&(n=Ce(n,t,e)),c}),query:(s,{path:e,value:t,check:r})=>s.filter(l=>{if(e.length===0)return r(l,t);let i=l,n=1,c=!1;for(const o of e){if(n===1&&n<e.length){i=i[o];for(const u of i[o]);}n===e.length&&(console.log(o,i),i[o]=ne.query(i[o],{path:[],value:t,check:r}),i[o].length>0&&(c=!0)),i=i[o],n++}return c})},ce={asc:(s,e,t,r)=>s===e?0:W(s)?1:W(e)?-1:typeof s=="boolean"?s===!1?1:-1:typeof s=="string"?s.localeCompare(e,t,r):typeof s=="number"?s-e:typeof s=="object"?JSON.stringify(s).localeCompare(JSON.stringify(e),t,r):String(s).localeCompare(String(e),t,r),desc:(s,e,t,r)=>s===e?0:W(s)?1:W(e)?-1:typeof e=="boolean"?e===!1?1:-1:typeof e=="string"?e.localeCompare(s,t,r):typeof e=="number"?e-s:typeof e=="object"?JSON.stringify(e).localeCompare(JSON.stringify(s),t,r):String(e).localeCompare(String(s),t,r)};class Pt{selectBy;#e=f("currentPage");get selectScope(){return a(this.#e)}set selectScope(e){h(this.#e,e,!0)}highlight;event=new wt;#t=f([]);get rawRows(){return a(this.#t)}set rawRows(e){h(this.#t,e)}#s=f(N({value:null}));get search(){return a(this.#s)}set search(e){h(this.#s,e,!0)}#r=f(N({}));get sort(){return a(this.#r)}set sort(e){h(this.#r,e,!0)}#i=f(N([]));get filters(){return a(this.#i)}set filters(e){h(this.#i,e,!0)}#l=f(N([]));get queries(){return a(this.#l)}set queries(e){h(this.#l,e,!0)}#a=f(10);get rowsPerPage(){return a(this.#a)}set rowsPerPage(e){h(this.#a,e,!0)}#n=f(1);get currentPage(){return a(this.#n)}set currentPage(e){h(this.#n,e,!0)}#c=f(void 0);get element(){return a(this.#c)}set element(e){h(this.#c,e,!0)}#o=f(1e3);get clientWidth(){return a(this.#o)}set clientWidth(e){h(this.#o,e,!0)}#h=m(()=>this.filters.length);get filterCount(){return a(this.#h)}set filterCount(e){h(this.#h,e)}#u=m(()=>this.createAllRows());get allRows(){return a(this.#u)}set allRows(e){h(this.#u,e)}#f=m(()=>this.createRows());get rows(){return a(this.#f)}set rows(e){h(this.#f,e)}#d=m(()=>this.createRowCount());get rowCount(){return a(this.#d)}set rowCount(e){h(this.#d,e)}#g=m(()=>this.createPages());get pages(){return a(this.#g)}set pages(e){h(this.#g,e)}#b=m(()=>this.pages.length);get pageCount(){return a(this.#b)}set pageCount(e){h(this.#b,e)}#p=m(()=>this.createPagesWithEllipsis());get pagesWithEllipsis(){return a(this.#p)}set pagesWithEllipsis(e){h(this.#p,e)}#v=f(N([]));get selected(){return a(this.#v)}set selected(e){h(this.#v,e,!0)}#w=m(()=>this.createIsAllSelected());get isAllSelected(){return a(this.#w)}set isAllSelected(e){h(this.#w,e)}constructor(e,t){this.rawRows=e,this.rowsPerPage=t.rowsPerPage??null,this.highlight=t.highlight??!1,this.selectBy=t.selectBy}createAllRows(){let e=ft(this.rawRows);if(this.search.value)e=ne.search(e,this.search,this.highlight),this.event.dispatch("change");else if(this.filters.length>0){for(const t of this.filters)e=ne.filter(e,t,this.highlight);this.event.dispatch("change")}else if(this.queries.length>0){for(const t of this.queries)e=ne.query(e,t);this.event.dispatch("change")}return e}createRows(){return this.rowsPerPage?this.allRows.slice((this.currentPage-1)*this.rowsPerPage,this.currentPage*this.rowsPerPage):this.allRows}createRowCount(){const e=this.allRows.length;return this.rowsPerPage?{total:e,start:this.currentPage*this.rowsPerPage-this.rowsPerPage+1,end:Math.min(this.currentPage*this.rowsPerPage,e),selected:this.selected.length}:{total:e,start:1,end:e,selected:this.selected.length}}createPages(){return this.rowsPerPage?Array.from(Array(Math.ceil(this.allRows.length/this.rowsPerPage))).map((t,r)=>r+1):[1]}createPagesWithEllipsis(){if(this.pageCount<=7)return this.pages;const e=null,t=1,r=this.pageCount;return this.currentPage<=4?[...this.pages.slice(0,5),e,r]:this.currentPage<r-3?[t,e,...this.pages.slice(this.currentPage-2,this.currentPage+1),e,r]:[t,e,...this.pages.slice(r-5,r)]}createIsAllSelected(){if(this.rowCount.total===0||!this.selectBy)return!1;const{callback:e}=O(this.selectBy);return this.selectScope==="all"?this.allRows.map(e).every(l=>this.selected.includes(l)):this.rows.map(e).every(r=>this.selected.includes(r))}}class kt{backup;table;constructor(e){this.table=e,this.backup=[]}set(e,t,r={}){this.table.sort.id!==t&&(this.table.sort.direction=null),this.table.sort.direction===null||this.table.sort.direction==="desc"?this.asc(e,t,r):this.table.sort.direction==="asc"&&this.desc(e,t,r)}asc(e,t,{locales:r,options:l}={}){if(!e)return;const{callback:i,key:n}=O(e,t);this.table.sort={id:t,callback:i,direction:"asc",key:n},this.table.rawRows=[...this.table.rawRows].sort((c,o)=>{const[u,p]=[i(c),i(o)];return ce.asc(u,p,r,l)}),this.save({id:t,callback:i,direction:"asc"}),this.table.setPage(1)}desc(e,t,{locales:r,options:l}={}){if(!e)return;const{callback:i,key:n}=O(e,t);this.table.sort={id:t,callback:i,direction:"desc",key:n},this.table.rawRows=[...this.table.rawRows].sort((c,o)=>{const[u,p]=[i(c),i(o)];return ce.desc(u,p,r,l)}),this.save({id:t,callback:i,direction:"desc"}),this.table.setPage(1)}clear(){this.backup=[],this.table.sort={}}restore(){for(const{key:e,callback:t,direction:r,id:l}of this.backup){const i=e??t;this[r](i,l)}}save(e){if(this.backup=this.backup.filter(t=>t.id!==e.id),this.backup.length>=3){const[t,r,l]=this.backup;this.backup=[r,l,e]}else this.backup=[...this.backup,e]}}class xt{table;constructor(e){this.table=e}set(e,t,r=null,l){this.table.setPage(1);const{callback:i,key:n}=O(t,l),c={value:e,id:l,callback:i,check:r,key:n};this.table.filters=this.table.filters.filter(o=>o.id!==l),Be(e)&&this.table.filters.push(c)}unset(e){this.table.setPage(1),this.table.filters=this.table.filters.filter(t=>t.id!==e)}}class St{table;constructor(e){this.table=e}set(e,t,r,l){this.table.setPage(1),this.table.queries=this.table.queries.filter(i=>i.id!==l),this.table.queries.push({path:e,value:t,check:r,id:l})}unset(e){this.table.setPage(1),this.table.queries=this.table.queries.filter(t=>t.id!==e)}}class Ht{table;constructor(e){this.table=e}set(e){this.table.selected.includes(e)?this.table.selected=this.table.selected.filter(t=>t!==e):this.table.selected=[e,...this.table.selected]}all(e){const t=e==="currentPage"?this.table.rows:this.table.allRows,{callback:r}=O(this.table.selectBy),l=t.map(r);e==="currentPage"?this.table.isAllSelected?this.table.selected=this.table.selected.filter(i=>l.includes(i)===!1):this.table.selected=[...new Set([...l,...this.table.selected])]:this.table.isAllSelected?this.clear():this.table.selected=l}clear(){this.table.selected=[]}getRows(){const{callback:e}=O(this.table.selectBy);return this.table.rawRows.filter(t=>this.table.selected.includes(e(t)))}}class Rt{table;constructor(e){this.table=e}goto(e){this.table.rowsPerPage&&e>=1&&e<=this.table.pageCount&&(this.table.currentPage=e,this.table.event.dispatch("change"))}previous(){this.goto(this.table.currentPage-1)}next(){this.goto(this.table.currentPage+1)}last(){this.goto(this.table.pageCount)}}class Ct{table;constructor(e){this.table=e}set(e,t){this.table.setPage(1),this.table.search={value:e,scope:t}}recursive(e,t){this.table.setPage(1),this.table.search={value:e,scope:t,isRecursive:!0}}regex(e,t){this.table.setPage(1),this.table.search={value:e,scope:t,check:J.match}}clear(){this.table.setPage(1),this.table.search={value:""}}}class At{#e=f(N([]));get columns(){return a(this.#e)}set columns(e){h(this.#e,e,!0)}table;interval;mutation;constructor(e,t){this.table=e,this.columns=[],this.interval=setInterval(()=>this.createColumns(t),200)}toggle(e){if(!this.table.element)return;const t=this.columns.find(r=>r.name===e);t&&t.toggle()}createColumns(e){this.table?.element&&(clearInterval(this.interval),this.columns=e.map(({name:t,index:r,isVisible:l,isFrozen:i})=>({name:t,index:r,isVisible:l!==!1,isFrozen:i===!0,element:this.table.element,toggle(){this.isVisible=!this.isVisible,this.element.querySelectorAll(`tr > *:nth-child(${this.index+1})`).forEach(n=>{n.classList.toggle("hidden")})}})),this.preset(),this.mutation=new MutationObserver(()=>{setTimeout(()=>{this.preset()},2)}),this.mutation.observe(this.table.element,{childList:!0,subtree:!0}))}preset(){let e=0;for(const{isVisible:t,isFrozen:r,index:l}of this.columns)r===!0&&(e+=this.freeze(l,e)),t===!1&&this.table.element.querySelectorAll(`tr > *:nth-child(${l+1})`).forEach(i=>{i.classList.add("hidden")})}freeze(e,t=0){const r=this.table.element.querySelector(`thead th:nth-child(${e+1})`),{width:l}=r.getBoundingClientRect();return this.table.element.querySelectorAll(`tr > *:nth-child(${e+1})`).forEach(i=>{i.style.position="sticky",i.style.left=t+"px",i.style.width=l+"px"}),l}setPosition(e,t){this.table.element.querySelectorAll("tr").forEach(r=>{const l=[].slice.call(r.querySelectorAll("th, td"));e>t?l[t].parentNode.insertBefore(l[e],l[t]):l[t].parentNode.insertBefore(l[e],l[t].nextSibling)})}}class qt{#e=f("");get value(){return a(this.#e)}set value(e){h(this.#e,e,!0)}scope;searchHandler;constructor(e,t){this.searchHandler=e,this.scope=t,this.cleanup()}set(){this.searchHandler.set(this.value,this.scope)}init(e){return this.value=e,this.set(),this}recursive(){this.searchHandler.recursive(this.value,this.scope)}regex(){this.searchHandler.regex(this.value,this.scope)}clear(){this.value="",this.searchHandler.clear()}cleanup(){this.searchHandler.table.on("clearSearch",()=>this.clear())}}class jt{#e=f("");get value(){return a(this.#e)}set value(e){h(this.#e,e,!0)}id=Math.random().toString(36).substring(2,15);filterHandler;field;check;constructor(e,t,r){this.filterHandler=e,this.field=t,this.check=r??J.isLike,this.cleanup()}set(e){this.filterHandler.set(this.value,this.field,e??this.check,this.id)}init(e){return this.value=e,this.set(),this}clear(){this.value="",this.filterHandler.unset(this.id)}cleanup(){this.filterHandler.table.on("clearFilters",()=>this.clear())}}class Bt{#e=f("");get value(){return a(this.#e)}set value(e){h(this.#e,e,!0)}id=Math.random().toString(36).substring(2,15);queryHandler;path=[];check;constructor(e){this.queryHandler=e,this.cleanup()}from(e){return this.path=e,this}where(e){return this.check=e,this}set(e){e&&(this.value=e),this.queryHandler.set(this.path,this.value,this.check,this.id)}clear(){this.value="",this.queryHandler.unset(this.id)}cleanup(){this.queryHandler.table.on("clearFilters",()=>this.clear())}}class Et{#e=f(N([]));get criteria(){return a(this.#e)}set criteria(e){h(this.#e,e,!0)}id=Math.random().toString(36).substring(2,15);filterHandler;collection;field;check;constructor(e,t,r){this.filterHandler=e,this.field=t,this.collection=[],this.check=r??J.isEqualTo,this.cleanup()}set(e,t){if(this.collection.find(r=>r.value===e)?this.collection=this.collection.filter(r=>r.value!==e):this.collection=[{value:e,check:t??this.check},...this.collection],this.collection.length===0)return this.clear();this.filterHandler.set(this.collection,this.field,J.whereIn,this.id),this.criteria=this.collection.map(r=>r.value)}clear(){this.collection=[],this.criteria=[],this.filterHandler.unset(this.id)}cleanup(){this.filterHandler.table.on("clearFilters",()=>this.clear())}}class Ft{callback;precision;table;constructor(e,t){this.table=e,this.callback=O(t).callback}distinct(e){const r=this.table.allRows.map(i=>this.callback(i)).reduce((i,n)=>{if(Array.isArray(n)){for(const c of n)i[c]=(i[c]??0)+1;return i}return i[n]=(i[n]??0)+1,i},{}),l=Object.entries(r).map(([i,n])=>({value:i,count:n}));if(e?.sort){const[i,n]=e.sort;i==="count"&&l.sort((c,o)=>ce.asc(c.value,o.value)),l.sort((c,o)=>ce[n](c[i],o[i]))}return l}avg(e){if(this.precision=e?.precision??2,this.table.allRows.length===0)return 0;const t=this.table.allRows.map(r=>this.callback(r)).filter(Boolean);return this.round(t.reduce((r,l)=>r+l,0)/t.length)}sum(e){this.precision=e?.precision??2;const t=this.table.allRows.map(r=>this.callback(r));return this.round(t.reduce((r,l)=>r+l,0))}median(e){this.precision=e?.precision??2;const t=[...this.table.allRows.map(l=>this.callback(l))].sort((l,i)=>l-i).filter(Boolean);if(t.length===0)return null;const r=Math.floor(t.length/2);return t.length%2?t[r]:this.round((t[r-1]+t[r])/2)}bounds(){const t=this.table.allRows.map(r=>this.callback(r)).filter(Boolean);return t.length===0?[null,null]:[Math.min(...t),Math.max(...t)]}round(e){return Number(e.toFixed(this.precision))}}class Nt{#e=m(()=>this.createDirection());get direction(){return a(this.#e)}set direction(e){h(this.#e,e)}#t=m(()=>this.createIsActive());get isActive(){return a(this.#t)}set isActive(e){h(this.#t,e)}id=Math.random().toString(36).substring(2,15);sortHandler;field;params;constructor(e,t,r){this.sortHandler=e,this.field=t,this.params=r??{}}set(){this.sortHandler.set(this.field,this.id,this.params)}init(e){return e?(this[e](),this):this}asc(){this.sortHandler.asc(this.field,this.id,this.params)}desc(){this.sortHandler.desc(this.field,this.id,this.params)}clear(){this.sortHandler.clear()}createIsActive(){return this.id===this.sortHandler.table.sort?.id}createDirection(){return this.isActive===!1?null:this.sortHandler.table.sort?.direction}}class Ot{table;constructor(e){this.table=e}download(e){const t=this.get(),r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}get(){const e=this.getRows();return e.unshift(this.getHeader().join(",")),e.join(`\r
`)}getRows(){return this.table.allRows.map(e=>Object.entries(e).map(([r,l])=>l===null?"":typeof l=="number"?l:`"${l}"`).join(","))}getHeader(){const[e]=this.table.allRows;return Object.entries(e).map(([t,r])=>`"${t}"`)}}class $t{#e=f("");get value(){return a(this.#e)}set value(e){h(this.#e,e,!0)}#t=m(()=>this.createRecords());get records(){return a(this.#t)}set records(e){h(this.#t,e)}#s=f([]);get rawRecords(){return a(this.#s)}set rawRecords(e){h(this.#s,e)}#r=f("");get filter(){return a(this.#r)}set filter(e){h(this.#r,e,!0)}constructor(e){this.rawRecords=e}set(){this.filter=this.value}createRecords(){return Be(this.filter)?this.rawRecords.filter(e=>D(e,this.filter,{check:J.isLike})):this.rawRecords}}class Tt extends Pt{i18n;view;sortHandler;filterHandler;queryHandler;selectHandler;pageHandler;searchHandler;constructor(e=[],t={rowsPerPage:null}){super(e,t),this.translate(t.i18n),this.sortHandler=new kt(this),this.filterHandler=new xt(this),this.queryHandler=new St(this),this.selectHandler=new Ht(this),this.pageHandler=new Rt(this),this.searchHandler=new Ct(this)}setRows(e){const t=this.element?.scrollTop??0;this.rawRows=e,_e(()=>{this.event.dispatch("change"),this.sortHandler.restore(),this.element&&setTimeout(()=>this.element.scrollTop=t,2)})}setRowsPerPage(e){this.rowsPerPage=e,this.setPage(1)}setPage(e){switch(e){case"previous":return this.pageHandler.previous();case"next":return this.pageHandler.next();case"last":return this.pageHandler.last();default:return this.pageHandler.goto(e)}}createSearch(e){return new qt(this.searchHandler,e)}clearSearch(){this.searchHandler.clear(),this.event.dispatch("clearSearch"),this.setPage(1)}createRecordFilter(e){return new $t(e)}createSort(e,t){return new Nt(this.sortHandler,e,t)}clearSort(){this.sortHandler.clear()}clearFilters(){this.filters=[],this.event.dispatch("clearFilters"),this.setPage(1)}createAdvancedFilter(e,t){return new Et(this.filterHandler,e,t)}createFilter(e,t){return new jt(this.filterHandler,e,t)}createQuery(){return new Bt(this.queryHandler)}select(e){this.selectHandler.set(e)}selectAll(e={}){this.selectScope=e.scope==="all"?"all":"currentPage",this.selectHandler.all(this.selectScope)}getSelectedRows(){return this.selectHandler.getRows()}clearSelection(){this.selectHandler.clear()}on(e,t){this.event.add(e,t)}createCalculation(e){return new Ft(this,e)}createCSV(){return new Ot(this)}createView(e){return this.view=new At(this,e),this.view}getView(){return this.view}translate(e){this.i18n={search:"Search...",show:"Show",entries:"entries",filter:"Filter",rowCount:"Showing {start} to {end} of {total} entries",noRows:"No entries found",previous:"Previous",next:"Next",...e}}}function Mt(s,e){e.handler.setRowsPerPage(Number(s.target.value))}var zt=V("<option> </option>"),It=V('<div><span class="text-sm"> </span> <select class="rounded border border-primary bg-box px-2 py-1 text-sm focus:outline-none"></select> <span class="text-sm"> </span></div>');function Lt(s,e){ye(e,!0);const t=()=>xe(ke,"$_",r),[r,l]=Se();let i=x(e,"class",3,""),n=he(e,["$$slots","$$events","$$legacy","handler","class"]),c=m(()=>e.handler.rowsPerPage);const o=[5,10,20,50,100];var u=It();oe(u,()=>({class:`flex items-center gap-2 ${i()??""}`,...n}));var p=b(u),g=b(p,!0);d(p);var P=C(p,2);P.__change=[Mt,e],qe(P,21,()=>o,je,(k,_)=>{var H=zt(),se=b(H,!0);d(H);var re={};q(()=>{S(se,a(_)),re!==(re=a(_))&&(H.value=(H.__value=a(_))??"")}),y(k,H)}),d(P);var T;at(P);var M=C(P,2),te=b(M,!0);d(M),d(u),q((k,_)=>{S(g,k),T!==(T=a(c))&&(P.value=(P.__value=a(c))??"",nt(P,a(c))),S(te,_)},[()=>t()("ui.pagination.show"),()=>t()("ui.pagination.entries")]),y(s,u),Pe(),l()}$(["change"]);var Vt=V("<div> </div>");function Wt(s,e){ye(e,!0);const t=()=>xe(ke,"$_",r),[r,l]=Se();let i=x(e,"class",3,""),n=he(e,["$$slots","$$events","$$legacy","handler","class"]),c=m(()=>e.handler.rowCount);var o=Vt();oe(o,()=>({class:`text-sm text-primary ${i()??""}`,...n}));var u=b(o);d(o),q((p,g,P,T)=>S(u,`${p??""} ${a(c).start??""} ${g??""} ${a(c).end??""} ${P??""} ${a(c).total??""} ${T??""}`),[()=>t()("ui.pagination.showing"),()=>t()("ui.pagination.to"),()=>t()("ui.pagination.of"),()=>t()("ui.pagination.entries")]),y(s,o),Pe(),l()}function Jt(s,e,t){a(e)&&(a(e).value=t(),a(e).set())}function Dt(s,e,t,r,l){const i=s.target.value;e(i),t()&&(h(r,t().createSort(e()),!0),l()==="desc"?(a(r).set(),a(r).set()):a(r).set())}function Qt(s,e,t){e(e()==="asc"?"desc":"asc"),a(t)&&a(t).set()}var Kt=(s,e,t)=>e(a(t)),Gt=V("<button><!></button>"),Ut=V('<div class="flex items-center gap-2"><span class="text-sm"> </span> <select class="border-primary bg-box rounded border px-2 py-1 text-sm focus:outline-none"><option> </option><option> </option><option> </option><option> </option></select> <button class="border-primary bg-box text-primary hover:bg-primary hover:text-box cursor-pointer rounded-full border p-2 transition-colors"><!></button></div>'),Xt=V('<div class="flex flex-wrap items-center gap-4"><!> <!> <!></div>'),Yt=V('<div class="space-y-4"><div class="flex flex-col items-start gap-4 sm:flex-row sm:items-center"><input type="text" class="border-primary focus:bg-box rounded-lg border px-4 py-2 focus:outline-none"/> <div class="flex flex-wrap gap-2"></div></div> <!></div>');function is(s,e){ye(e,!0);const t=()=>xe(ke,"$_",r),[r,l]=Se();let i=x(e,"searchTerm",15,""),n=x(e,"selectedType",15,"all"),c=x(e,"showRowsPerPage",3,!1),o=x(e,"showResultsCount",3,!0),u=x(e,"showSort",3,!1),p=x(e,"filteredProjects",31,()=>N([])),g=x(e,"handler",15),P=x(e,"rowsPerPage",19,()=>e.projects.length),T=x(e,"sortBy",15,"date"),M=x(e,"sortOrder",15,"desc"),te=f(void 0),k=f(void 0),_=f(void 0),H=f(void 0),se=f(!1),re=m(()=>["all","featured",...new Set(e.projects.map(v=>v.type))]);Re(()=>{e.projects&&e.projects.length>0&&!a(se)&&(g(new Tt(e.projects,{rowsPerPage:P()})),h(te,g().createSearch(),!0),h(k,g().createFilter("type"),!0),h(_,g().createFilter("featured",v=>v===!0),!0),h(H,g().createSort("date"),!0),a(H).set(),a(H).set(),h(se,!0))});function Fe(v){n(v),v==="featured"?(a(_)&&(a(_).value=!0,a(_).set()),a(k)&&(a(k).value="",a(k).set())):(a(_)&&(a(_).value="",a(_).set()),a(k)&&(v==="all"?a(k).value="":a(k).value=v,a(k).set()))}Re(()=>{g()&&g().rows&&_e(()=>{p(g().rows)})});var ue=Yt(),fe=b(ue),Q=b(fe);ct(Q),Q.__input=[Jt,te,i];var He=C(Q,2);qe(He,21,()=>a(re),je,(v,A)=>{var j=Gt();j.__click=[Kt,Fe,A];var de=b(j);{var ie=B=>{var z=be();q(w=>S(z,w),[()=>t()("ui.all")]),y(B,z)},ge=B=>{var z=it(),w=lt(z);{var K=E=>{var R=be();q(I=>S(R,I),[()=>t()("ui.featured")]),y(E,R)},G=E=>{var R=be();q(()=>S(R,a(A))),y(E,R)};L(w,E=>{a(A)==="featured"?E(K):E(G,!1)},!0)}y(B,z)};L(de,B=>{a(A)==="all"?B(ie):B(ge,!1)})}d(j),q(()=>ot(j,1,`rounded-full border px-3 py-1 text-sm capitalize ${n()===a(A)?"border-primary bg-primary text-box":"border-primary bg-box text-primary hover:bg-primary hover:text-box cursor-pointer"}`)),y(v,j)}),d(He),d(fe);var Ne=C(fe,2);{var Oe=v=>{var A=Xt(),j=b(A);{var de=w=>{Lt(w,{get handler(){return g()}})};L(j,w=>{c()&&w(de)})}var ie=C(j,2);{var ge=w=>{var K=Ut(),G=b(K),E=b(G,!0);d(G);var R=C(G,2);R.__change=[Dt,T,g,H,M];var I=b(R),$e=b(I,!0);d(I),I.value=I.__value="date";var U=C(I),Te=b(U,!0);d(U),U.value=U.__value="title";var X=C(U),Me=b(X,!0);d(X),X.value=X.__value="type";var le=C(X),ze=b(le,!0);d(le),le.value=le.__value="location",d(R);var Y=C(R,2);Y.__click=[Qt,M,H];var Ie=b(Y);{var Le=F=>{bt(F,{class:"pointer-events-none size-4"})},Ve=F=>{vt(F,{class:"pointer-events-none size-4"})};L(Ie,F=>{M()==="asc"?F(Le):F(Ve,!1)})}d(Y),d(K),q((F,We,Je,De,Qe,Ke,Ge)=>{S(E,F),S($e,We),S(Te,Je),S(Me,De),S(ze,Qe),pe(Y,"aria-label",Ke),pe(Y,"title",Ge)},[()=>t()("ui.sort.sort_by"),()=>t()("ui.sort.date"),()=>t()("ui.sort.title"),()=>t()("ui.sort.type"),()=>t()("ui.sort.location"),()=>t()("ui.sort.toggle_order"),()=>M()==="asc"?t()("ui.sort.ascending"):t()("ui.sort.descending")]),ht(R,T),y(w,K)};L(ie,w=>{u()&&w(ge)})}var B=C(ie,2);{var z=w=>{Wt(w,{get handler(){return g()}})};L(B,w=>{o()&&w(z)})}d(A),y(v,A)};L(Ne,v=>{g()&&(c()||u()||o())&&v(Oe)})}d(ue),q(v=>pe(Q,"placeholder",v),[()=>t()("ui.search_projects_placeholder")]),dt(Q,i),y(s,ue),Pe(),l()}$(["input","click","change"]);export{is as A,bt as C,vt as a};
