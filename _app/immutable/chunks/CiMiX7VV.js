import{al as q,O as h,P as A,Z as E,X as S,a7 as x,am as z,an as R,a5 as c,ao as T,S as y,_ as k,z as F,ap as N,aq as P}from"./5VZ75QxE.js";function X(e,r,...n){var s=e,t=c,i;q(()=>{t!==(t=r())&&(i&&(T(i),i=null),i=R(()=>t(s,...n)))},z),h&&(s=y)}function Z(e){return(r,...n)=>{var s=e(...n),t;if(h)t=y,A();else{var i=s.render().trim(),f=E(i);t=k(f),r.before(t)}const u=s.setup?.(t);S(t,t),typeof u=="function"&&x(u)}}function m(e,r,n){if(e==null)return r(void 0),n&&n(void 0),c;const s=F(()=>e.subscribe(r,n));return s.unsubscribe?()=>s.unsubscribe():s}const b=[];function B(e,r){return{subscribe:C(e,r).subscribe}}function C(e,r=c){let n=null;const s=new Set;function t(u){if(N(e,u)&&(e=u,n)){const o=!b.length;for(const a of s)a[1](),b.push(a,e);if(o){for(let a=0;a<b.length;a+=2)b[a][0](b[a+1]);b.length=0}}}function i(u){t(u(e))}function f(u,o=c){const a=[u,o];return s.add(a),s.size===1&&(n=r(t,i)||c),u(e),()=>{s.delete(a),s.size===0&&n&&(n(),n=null)}}return{set:t,update:i,subscribe:f}}function j(e,r,n){const s=!Array.isArray(e),t=s?[e]:e;if(!t.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=r.length<2;return B(n,(f,u)=>{let o=!1;const a=[];let p=0,d=c;const g=()=>{if(p)return;d();const l=r(s?a[0]:a,f,u);i?f(l):d=typeof l=="function"?l:c},v=t.map((l,_)=>m(l,w=>{a[_]=w,p&=~(1<<_),o&&g()},()=>{p|=1<<_}));return o=!0,g(),function(){P(v),d(),o=!1}})}function D(e){let r;return m(e,n=>r=n)(),r}export{m as a,Z as c,j as d,D as g,X as s,C as w};
