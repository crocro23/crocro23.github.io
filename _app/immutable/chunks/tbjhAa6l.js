import{ak as A,N as h,O as E,Y as R,W as k,a6 as q,al as x,am as z,a4 as c,an as N,R as y,Z as S,z as T,ao as F,ap as B}from"./BCZbx2Sk.js";function W(e,r,...n){var s=e,t=c,i;A(()=>{t!==(t=r())&&(i&&(N(i),i=null),i=z(()=>t(s,...n)))},x),h&&(s=y)}function Y(e){return(r,...n)=>{var s=e(...n),t;if(h)t=y,E();else{var i=s.render().trim(),f=R(i);t=S(f),r.before(t)}const u=s.setup?.(t);k(t,t),typeof u=="function"&&q(u)}}function m(e,r,n){if(e==null)return r(void 0),n&&n(void 0),c;const s=T(()=>e.subscribe(r,n));return s.unsubscribe?()=>s.unsubscribe():s}const b=[];function C(e,r){return{subscribe:O(e,r).subscribe}}function O(e,r=c){let n=null;const s=new Set;function t(u){if(F(e,u)&&(e=u,n)){const o=!b.length;for(const a of s)a[1](),b.push(a,e);if(o){for(let a=0;a<b.length;a+=2)b[a][0](b[a+1]);b.length=0}}}function i(u){t(u(e))}function f(u,o=c){const a=[u,o];return s.add(a),s.size===1&&(n=r(t,i)||c),u(e),()=>{s.delete(a),s.size===0&&n&&(n(),n=null)}}return{set:t,update:i,subscribe:f}}function Z(e,r,n){const s=!Array.isArray(e),t=s?[e]:e;if(!t.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=r.length<2;return C(n,(f,u)=>{let o=!1;const a=[];let p=0,d=c;const g=()=>{if(p)return;d();const l=r(s?a[0]:a,f,u);i?f(l):d=typeof l=="function"?l:c},v=t.map((l,_)=>m(l,w=>{a[_]=w,p&=~(1<<_),o&&g()},()=>{p|=1<<_}));return o=!0,g(),function(){B(v),d(),o=!1}})}function j(e){let r;return m(e,n=>r=n)(),r}export{m as a,Y as c,Z as d,j as g,W as s,O as w};
